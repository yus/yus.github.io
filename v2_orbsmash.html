<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D SVG Rotation Animation - Properly Centered</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #f1f1f1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff9a00, #ffcc00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #aaa;
            max-width: 600px;
            margin: 0 auto 30px;
        }
        
        .highlight {
            color: #ffcc00;
            font-weight: bold;
        }
        
        .animation-container {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            justify-content: center;
            align-items: center;
            width: 100%;
        }
        
        .svg-wrapper {
            background: rgba(20, 25, 45, 0.8);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s ease;
        }
        
        .svg-wrapper:hover {
            transform: translateY(-5px);
        }
        
        #svg-container {
            width: 500px;
            height: 500px;
            perspective: 1200px;
            position: relative;
            overflow: hidden;
        }
        
        #animated-svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 15px rgba(255, 255, 0, 0.4));
        }
        
        .center-guide {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 0, 0, 0.5);
            pointer-events: none;
            z-index: 10;
            display: none;
        }
        
        .center-guide.active {
            display: block;
        }
        
        .controls {
            background: rgba(20, 25, 45, 0.8);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
            max-width: 500px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        h2 {
            color: #ffcc00;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .slider-container {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #ddd;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #333;
            outline: none;
            opacity: 0.9;
            transition: opacity 0.2s;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffcc00;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }
        
        .slider:hover {
            opacity: 1;
        }
        
        .slider-value {
            display: inline-block;
            min-width: 40px;
            text-align: right;
            color: #ffcc00;
            font-weight: bold;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 24px;
            background: linear-gradient(90deg, #ff9a00, #ffcc00);
            border: none;
            border-radius: 8px;
            color: #222;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-grow: 1;
            min-width: 140px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button#reset {
            background: linear-gradient(90deg, #4a6fa5, #6a93cb);
            color: white;
        }
        
        button#toggle-center {
            background: linear-gradient(90deg, #ff5555, #ff8888);
            color: white;
        }
        
        .info-panel {
            background: rgba(20, 25, 45, 0.8);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
            max-width: 500px;
        }
        
        .info-panel h2 {
            margin-bottom: 15px;
        }
        
        .info-panel p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #ccc;
        }
        
        .rotation-display {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .axis {
            text-align: center;
            font-size: 0.9rem;
        }
        
        .axis-name {
            color: #ffcc00;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .axis-value {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 5px;
            color: #fff;
        }
        
        @media (max-width: 1100px) {
            .animation-container {
                flex-direction: column;
            }
            
            .svg-wrapper, .controls, .info-panel {
                max-width: 100%;
            }
        }
        
        @media (max-width: 600px) {
            #svg-container {
                width: 350px;
                height: 350px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Centered 3D SVG Rotation</h1>
            <p class="subtitle">Properly centered rotation around the viewBox center <span class="highlight">(512, 512)</span> for stable 3D orbiting</p>
        </header>
        
        <div class="animation-container">
            <div class="svg-wrapper">
                <div id="svg-container">
                    <div class="center-guide" id="center-guide"></div>
                    <svg id="animated-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="1024" height="1024">
                        <!-- Font: notomath -->
                        <!-- Character: ⨳ (U+2A33) -->
                        <!-- We'll apply transforms via JavaScript to properly center rotation -->
                        <g id="rotating-element">
                            <!-- Original path with proper centering -->
                            <path d="M82.84235294117646 386.25882352941176 57.43058823529411 360.8470588235294 143.8305882352941 274.4470588235294 109.27058823529411 239.8870588235294 51.33176470588235 298.3341176470588 25.919999999999998 272.9223529411765 83.85882352941175 214.47529411764705 25.919999999999998 155.52 51.33176470588235 130.10823529411766 109.27058823529411 188.55529411764707 143.8305882352941 153.99529411764706 57.43058823529411 67.59529411764709 82.84235294117646 42.18352941176471 169.24235294117645 128.58352941176472 256.1505882352941 42.18352941176471 281.5623529411764 67.59529411764709 195.16235294117644 153.99529411764706 229.2141176470588 188.55529411764707 287.6611764705882 130.10823529411766 313.0729411764706 155.52 254.62588235294115 214.47529411764705 313.0729411764706 272.9223529411765 287.6611764705882 298.3341176470588 229.2141176470588 239.8870588235294 195.16235294117644 274.4470588235294 281.5623529411764 360.8470588235294 256.1505882352941 386.25882352941176 169.24235294117645 299.8588235294118ZM169.24235294117645 248.52705882352942 203.2941176470588 214.47529411764705 169.24235294117645 179.91529411764705 135.19058823529411 214.47529411764705Z" fill="olive" stroke="black" stroke-width="2"/>
                        </g>
                    </svg>
                </div>
            </div>
            
            <div class="controls">
                <h2>Rotation Controls</h2>
                
                <div class="control-group">
                    <div class="slider-container">
                        <label for="rotateX">X-Axis Rotation: <span id="rotateX-value" class="slider-value">0°</span></label>
                        <input type="range" id="rotateX" class="slider" min="0" max="360" value="0">
                    </div>
                    
                    <div class="slider-container">
                        <label for="rotateY">Y-Axis Rotation: <span id="rotateY-value" class="slider-value">0°</span></label>
                        <input type="range" id="rotateY" class="slider" min="0" max="360" value="0">
                    </div>
                    
                    <div class="slider-container">
                        <label for="rotateZ">Z-Axis Rotation: <span id="rotateZ-value" class="slider-value">0°</span></label>
                        <input type="range" id="rotateZ" class="slider" min="0" max="360" value="0">
                    </div>
                    
                    <div class="slider-container">
                        <label for="speed">Animation Speed: <span id="speed-value" class="slider-value">1.0x</span></label>
                        <input type="range" id="speed" class="slider" min="0" max="3" step="0.1" value="1">
                    </div>
                </div>
                
                <div class="buttons">
                    <button id="start">Start Auto-Rotation</button>
                    <button id="stop">Stop Auto-Rotation</button>
                    <button id="reset">Reset Rotation</button>
                    <button id="toggle-center">Toggle Center Guide</button>
                </div>
                
                <div class="rotation-display">
                    <div class="axis">
                        <div class="axis-name">X-Axis</div>
                        <div id="current-x" class="axis-value">0°</div>
                    </div>
                    <div class="axis">
                        <div class="axis-name">Y-Axis</div>
                        <div id="current-y" class="axis-value">0°</div>
                    </div>
                    <div class="axis">
                        <div class="axis-name">Z-Axis</div>
                        <div id="current-z" class="axis-value">0°</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-panel">
            <h2>About This Animation</h2>
            <p>This version properly centers the SVG element for rotation. The key improvements:</p>
            <ol>
                <li><span class="highlight">Centered Rotation:</span> The rotation now happens around the viewBox center (512, 512) instead of the element's original position.</li>
                <li><span class="highlight">Stable Orbiting:</span> The symbol now rotates in place without drifting, similar to the reference example.</li>
                <li><span class="highlight">Visual Center Guide:</span> Toggle the red dot to see the exact rotation center.</li>
            </ol>
            <p>The rotation is calculated by first translating to the center, applying 3D rotations, then translating back.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get DOM elements
            const rotatingElement = document.getElementById('rotating-element');
            const rotateXSlider = document.getElementById('rotateX');
            const rotateYSlider = document.getElementById('rotateY');
            const rotateZSlider = document.getElementById('rotateZ');
            const speedSlider = document.getElementById('speed');
            const centerGuide = document.getElementById('center-guide');
            
            const rotateXValue = document.getElementById('rotateX-value');
            const rotateYValue = document.getElementById('rotateY-value');
            const rotateZValue = document.getElementById('rotateZ-value');
            const speedValue = document.getElementById('speed-value');
            
            const currentX = document.getElementById('current-x');
            const currentY = document.getElementById('current-y');
            const currentZ = document.getElementById('current-z');
            
            const startButton = document.getElementById('start');
            const stopButton = document.getElementById('stop');
            const resetButton = document.getElementById('reset');
            const toggleCenterButton = document.getElementById('toggle-center');
            
            // Constants for centering
            const VIEWBOX_SIZE = 1024;
            const CENTER_X = VIEWBOX_SIZE / 2;  // 512
            const CENTER_Y = VIEWBOX_SIZE / 2;  // 512
            
            // Calculate the element's bounding box to find its center
            // From the original transform: translate(342.50, 296.00)
            // The element itself has dimensions, so we need to find its true center
            const originalTranslateX = 342.50;
            const originalTranslateY = 296.00;
            
            // Based on the path data, let's approximate the element's dimensions
            // The element appears to be roughly 340x340 in size
            const elementWidth = 340;
            const elementHeight = 340;
            
            // Calculate the element's center relative to the viewBox
            const elementCenterX = originalTranslateX + (elementWidth / 2);
            const elementCenterY = originalTranslateY + (elementHeight / 2);
            
            // Calculate translation needed to move element center to viewBox center
            const translateToCenterX = CENTER_X - elementCenterX;
            const translateToCenterY = CENTER_Y - elementCenterY;
            
            // Initial rotation values
            let rotateX = 0;
            let rotateY = 0;
            let rotateZ = 0;
            let speed = 1.0;
            let autoRotate = false;
            let animationId = null;
            let showCenterGuide = false;
            
            // Update rotation display with proper centering
            function updateRotationDisplay() {
                // Apply the transformation in the correct order:
                // 1. Translate element to viewBox center
                // 2. Apply 3D rotations
                // 3. Translate back to original position
                // This ensures rotation happens around the viewBox center
                
                const transform = `
                    translate(${originalTranslateX + translateToCenterX}px, ${originalTranslateY + translateToCenterY}px)
                    rotateX(${rotateX}deg)
                    rotateY(${rotateY}deg)
                    rotateZ(${rotateZ}deg)
                    translate(${-translateToCenterX}px, ${-translateToCenterY}px)
                `;
                
                rotatingElement.style.transform = transform;
                rotatingElement.style.transformOrigin = `${elementCenterX}px ${elementCenterY}px`;
                rotatingElement.style.transformStyle = 'preserve-3d';
                
                // Update slider values
                rotateXValue.textContent = `${rotateX.toFixed(1)}°`;
                rotateYValue.textContent = `${rotateY.toFixed(1)}°`;
                rotateZValue.textContent = `${rotateZ.toFixed(1)}°`;
                
                // Update current rotation display
                currentX.textContent = `${Math.round(rotateX)}°`;
                currentY.textContent = `${Math.round(rotateY)}°`;
                currentZ.textContent = `${Math.round(rotateZ)}°`;
            }
            
            // Initialize display
            updateRotationDisplay();
            
            // Slider event listeners
            rotateXSlider.addEventListener('input', function() {
                rotateX = parseInt(this.value);
                updateRotationDisplay();
            });
            
            rotateYSlider.addEventListener('input', function() {
                rotateY = parseInt(this.value);
                updateRotationDisplay();
            });
            
            rotateZSlider.addEventListener('input', function() {
                rotateZ = parseInt(this.value);
                updateRotationDisplay();
            });
            
            speedSlider.addEventListener('input', function() {
                speed = parseFloat(this.value);
                speedValue.textContent = `${speed.toFixed(1)}x`;
            });
            
            // Animation function for auto-rotation
            function animate() {
                if (!autoRotate) return;
                
                // Increment rotation based on speed
                rotateX = (rotateX + 0.8 * speed) % 360;
                rotateY = (rotateY + 1.2 * speed) % 360;
                rotateZ = (rotateZ + 0.5 * speed) % 360;
                
                // Update sliders and display
                rotateXSlider.value = rotateX;
                rotateYSlider.value = rotateY;
                rotateZSlider.value = rotateZ;
                
                updateRotationDisplay();
                
                // Continue animation
                animationId = requestAnimationFrame(animate);
            }
            
            // Button event listeners
            startButton.addEventListener('click', function() {
                if (autoRotate) return;
                autoRotate = true;
                animate();
                startButton.disabled = true;
                stopButton.disabled = false;
            });
            
            stopButton.addEventListener('click', function() {
                autoRotate = false;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                startButton.disabled = false;
                stopButton.disabled = true;
            });
            
            resetButton.addEventListener('click', function() {
                // Stop auto-rotation if active
                autoRotate = false;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                
                // Reset rotation values
                rotateX = 0;
                rotateY = 0;
                rotateZ = 0;
                speed = 1.0;
                
                // Update sliders
                rotateXSlider.value = rotateX;
                rotateYSlider.value = rotateY;
                rotateZSlider.value = rotateZ;
                speedSlider.value = speed;
                
                // Update displays
                speedValue.textContent = `${speed.toFixed(1)}x`;
                updateRotationDisplay();
                
                // Enable start button
                startButton.disabled = false;
                stopButton.disabled = true;
            });
            
            toggleCenterButton.addEventListener('click', function() {
                showCenterGuide = !showCenterGuide;
                if (showCenterGuide) {
                    centerGuide.classList.add('active');
                    toggleCenterButton.textContent = 'Hide Center Guide';
                } else {
                    centerGuide.classList.remove('active');
                    toggleCenterButton.textContent = 'Show Center Guide';
                }
            });
            
            // Initialize button states
            stopButton.disabled = true;
            
            // Log centering information
            console.log('ViewBox Center:', CENTER_X, CENTER_Y);
            console.log('Element Center (approx):', elementCenterX, elementCenterY);
            console.log('Translation to center:', translateToCenterX, translateToCenterY);
        });
    </script>
</body>
</html>
