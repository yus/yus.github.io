<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escher Reptiles Pattern</title>
    <script src="https://cdnjs.cloudflare.com/p5.js/1.7.0/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #2c3e50;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #ecf0f1;
            overflow-x: hidden;
        }
        .container {
            width: 100%;
            max-width: 1000px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }
        header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #e74c3c;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #bdc3c7;
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(44, 62, 80, 0.7);
            border-radius: 10px;
            width: 100%;
            max-width: 800px;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 10px;
        }
        label {
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        input[type="range"] {
            width: 150px;
        }
        button {
            background: #e74c3c;
            color: #fff;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin: 5px;
        }
        button:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }
        #canvas-container {
            margin: 20px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }
        .info {
            max-width: 800px;
            background: rgba(44, 62, 80, 0.7);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            line-height: 1.6;
        }
        .info h2 {
            color: #e74c3c;
            margin-top: 0;
        }
        .pattern-type {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .pattern-btn {
            background: #34495e;
            padding: 8px 15px;
        }
        .pattern-btn.active {
            background: #e74c3c;
        }
        footer {
            margin-top: 30px;
            text-align: center;
            font-size: 0.9rem;
            color: #bdc3c7;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Escher's Reptiles Pattern</h1>
            <div class="subtitle">Recreating the iconic lizard tessellation</div>
        </header>
        
        <div class="controls">
            <div class="control-group">
                <label for="scale">Scale</label>
                <input type="range" id="scale" min="10" max="50" value="25">
            </div>
            <div class="control-group">
                <label for="spacing">Spacing</label>
                <input type="range" id="spacing" min="5" max="30" value="15">
            </div>
            <div class="control-group">
                <label for="rotation">Rotation</label>
                <input type="range" id="rotation" min="0" max="360" value="0">
            </div>
            <div class="control-group">
                <label>Pattern Type</label>
                <div class="pattern-type">
                    <button class="pattern-btn active" data-pattern="flat">Flat</button>
                    <button class="pattern-btn" data-pattern="3d">3D Effect</button>
                    <button class="pattern-btn" data-pattern="color">Color Fill</button>
                </div>
            </div>
            <div class="control-group">
                <button id="animate-btn">Toggle Animation</button>
                <button id="randomize-btn">Randomize</button>
            </div>
        </div>
        
        <div id="canvas-container"></div>
        
        <div class="info">
            <h2>About Escher's Reptiles</h2>
            <p>M.C. Escher's "Reptiles" (1943) is one of his most famous tessellation works. It features interlocking lizard shapes that appear to crawl out of a drawing, move around in three dimensions, and then return to the two-dimensional pattern.</p>
            <p>This interactive visualization recreates the simple lizard shape that forms the basis of this famous work. The lizards fit together perfectly without gaps, creating a seamless pattern that exemplifies Escher's mastery of tessellation.</p>
        </div>
        
        <footer>
            <p>Created with p5.js | Inspired by M.C. Escher's "Reptiles" (1943)</p>
        </footer>
    </div>

    <script>
        // p5.js sketch
        let scale = 25;
        let spacing = 15;
        let rotation = 0;
        let isAnimating = false;
        let animationOffset = 0;
        let patternType = 'flat';
        
        function setup() {
            const container = document.getElementById('canvas-container');
            const width = Math.min(800, window.innerWidth - 40);
            const canvas = createCanvas(width, width * 0.8);
            canvas.parent('canvas-container');
            
            // Set up controls
            document.getElementById('scale').addEventListener('input', function() {
                scale = parseInt(this.value);
                redraw();
            });
            
            document.getElementById('spacing').addEventListener('input', function() {
                spacing = parseInt(this.value);
                redraw();
            });
            
            document.getElementById('rotation').addEventListener('input', function() {
                rotation = parseInt(this.value);
                redraw();
            });
            
            document.getElementById('animate-btn').addEventListener('click', function() {
                isAnimating = !isAnimating;
                if (isAnimating) {
                    loop();
                } else {
                    noLoop();
                    redraw();
                }
            });
            
            document.getElementById('randomize-btn').addEventListener('click', function() {
                scale = Math.floor(Math.random() * 40) + 10;
                spacing = Math.floor(Math.random() * 25) + 5;
                rotation = Math.floor(Math.random() * 360);
                
                document.getElementById('scale').value = scale;
                document.getElementById('spacing').value = spacing;
                document.getElementById('rotation').value = rotation;
                
                redraw();
            });
            
            // Pattern type buttons
            document.querySelectorAll('.pattern-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.pattern-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    patternType = this.getAttribute('data-pattern');
                    redraw();
                });
            });
            
            noLoop(); // Start with no animation
        }
        
        function draw() {
            background(52, 73, 94);
            
            // Add animation effect if enabled
            if (isAnimating) {
                animationOffset += 0.02;
            }
            
            // Calculate grid dimensions
            const cols = Math.floor(width / (scale * 3 + spacing));
            const rows = Math.floor(height / (scale * 2 + spacing));
            
            // Center the pattern
            const offsetX = (width - cols * (scale * 3 + spacing)) / 2;
            const offsetY = (height - rows * (scale * 2 + spacing)) / 2;
            
            // Draw the reptile pattern
            for (let x = 0; x < cols; x++) {
                for (let y = 0; y < rows; y++) {
                    push();
                    
                    // Calculate position
                    const xPos = offsetX + x * (scale * 3 + spacing) + (y % 2) * (scale * 1.5 + spacing/2);
                    const yPos = offsetY + y * (scale * 2 + spacing);
                    
                    // Add subtle animation movement
                    const animX = isAnimating ? sin(animationOffset + x * 0.7 + y * 0.3) * 3 : 0;
                    const animY = isAnimating ? cos(animationOffset + y * 0.5 + x * 0.2) * 3 : 0;
                    
                    translate(xPos + animX, yPos + animY);
                    rotate(radians(rotation));
                    
                    // Draw the reptile
                    drawEscherReptile(0, 0, scale, patternType, x, y);
                    
                    pop();
                }
            }
        }
        
        function drawEscherReptile(x, y, size, type, gridX, gridY) {
            // Define the reptile shape points (simplified version of Escher's lizard)
            // Body
            const bodyPoints = [
                {x: x, y: y - size * 0.5},
                {x: x + size * 0.7, y: y - size * 0.3},
                {x: x + size, y: y},
                {x: x + size * 0.7, y: y + size * 0.3},
                {x: x, y: y + size * 0.5},
                {x: x - size * 0.7, y: y + size * 0.3},
                {x: x - size, y: y},
                {x: x - size * 0.7, y: y - size * 0.3}
            ];
            
            // Head
            const headPoints = [
                {x: x + size * 0.8, y: y - size * 0.2},
                {x: x + size * 1.3, y: y - size * 0.1},
                {x: x + size * 1.4, y: y},
                {x: x + size * 1.3, y: y + size * 0.1},
                {x: x + size * 0.8, y: y + size * 0.2}
            ];
            
            // Legs (four legs)
            const legs = [
                // Front right
                {x1: x + size * 0.5, y1: y - size * 0.2, x2: x + size * 0.8, y2: y - size * 0.5},
                // Front left
                {x1: x + size * 0.3, y1: y - size * 0.3, x2: x + size * 0.6, y2: y - size * 0.6},
                // Back right
                {x1: x + size * 0.5, y1: y + size * 0.2, x2: x + size * 0.8, y2: y + size * 0.5},
                // Back left
                {x1: x + size * 0.3, y1: y + size * 0.3, x2: x + size * 0.6, y2: y + size * 0.6}
            ];
            
            // Tail
            const tailPoints = [
                {x: x - size * 0.8, y: y - size * 0.1},
                {x: x - size * 1.5, y: y - size * 0.3},
                {x: x - size * 1.8, y: y},
                {x: x - size * 1.5, y: y + size * 0.3},
                {x: x - size * 0.8, y: y + size * 0.1}
            ];
            
            // Draw based on pattern type
            if (type === 'color') {
                // Color fill style
                fill(231, 76, 60, 200);
                stroke(192, 57, 43);
                strokeWeight(2);
                
                // Draw body
                beginShape();
                for (let point of bodyPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw head
                beginShape();
                for (let point of headPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw tail
                beginShape();
                for (let point of tailPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw legs
                strokeWeight(size/8);
                for (let leg of legs) {
                    line(leg.x1, leg.y1, leg.x2, leg.y2);
                }
                
                // Draw eye
                fill(255);
                ellipse(x + size * 1.2, y, size/6, size/6);
                fill(0);
                ellipse(x + size * 1.2, y, size/12, size/12);
                
            } else if (type === '3d') {
                // 3D effect style
                noFill();
                stroke(241, 196, 15);
                strokeWeight(3);
                
                // Draw body with 3D effect
                beginShape();
                for (let point of bodyPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw head
                beginShape();
                for (let point of headPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw tail
                beginShape();
                for (let point of tailPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw legs
                for (let leg of legs) {
                    line(leg.x1, leg.y1, leg.x2, leg.y2);
                }
                
                // Add shading for 3D effect
                fill(241, 196, 15, 100);
                noStroke();
                beginShape();
                vertex(bodyPoints[0].x, bodyPoints[0].y);
                vertex(bodyPoints[1].x, bodyPoints[1].y);
                vertex(bodyPoints[2].x, bodyPoints[2].y);
                vertex(bodyPoints[3].x, bodyPoints[3].y);
                vertex(bodyPoints[4].x, bodyPoints[4].y);
                endShape(CLOSE);
                
            } else {
                // Flat style (closest to Escher's original)
                noFill();
                stroke(236, 240, 241);
                strokeWeight(2);
                
                // Draw body
                beginShape();
                for (let point of bodyPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw head
                beginShape();
                for (let point of headPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw tail
                beginShape();
                for (let point of tailPoints) {
                    vertex(point.x, point.y);
                }
                endShape(CLOSE);
                
                // Draw legs
                for (let leg of legs) {
                    line(leg.x1, leg.y1, leg.x2, leg.y2);
                }
                
                // Draw eye
                fill(236, 240, 241);
                ellipse(x + size * 1.2, y, size/10, size/10);
            }
        }
        
        function windowResized() {
            const width = Math.min(800, window.innerWidth - 40);
            resizeCanvas(width, width * 0.8);
            redraw();
        }
    </script>
</body>
</html>